<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

	<title>reveal.js</title>

	<link rel="stylesheet" href="css/reveal.css">
	<link rel="stylesheet" href="css/theme/simple.css">

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/zenburn.css">

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement('link');
		link.rel = 'stylesheet';
		link.type = 'text/css';
		link.href = window.location.search.match(/print-pdf/gi) ? 'css/print/pdf.css' : 'css/print/paper.css';
		document.getElementsByTagName('head')[0].appendChild(link);
	</script>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				React JS Day
				<h2>Web Animation API</h2>
			</section>
			<section data-background="./images/cat-party.gif">
				<h2 style="color: #fff; text-transform: uppercase; font-weight: 900; text-shadow: 0.05em 0.05em black, -0.05em -0.05em black, -0.05em 0.05em black, 0.05em -0.05em black;">Let's
					start meow</h2>
			</section>
			<section>
				<h1>What they are?</h1>
				<p class="cit">The Web Animations API provides a common language for browsers and developers to describe animations
					on DOM elements.</p>
				<a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Animations_API" target="_blank" class="cit">MDN</a>
			</section>
			<section>
				<section>
					<h1 style="font-size: 3em;">How we animate now?</h1>
					<p>
						<small>(Not in order)</small>
					</p>
					<ul>
						<li><a href="https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setInterval" target="_blank"><code>setInterval</code></a></li>
						<li><a href="http://api.jquery.com/animate/" target="_blank"><code>jQuery.animate()</code></a></li>
						<li><a href="https://developer.mozilla.org/it/docs/Web/API/window/requestAnimationFrame" target="_blank"><code>requestAnimationFrame()</code></a></li>
						<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Animations/Using_CSS_animations" target="_blank">CSS
								animations</a> or libs like <a href="https://greensock.com/gsap">GSAP</a> e <a href="http://velocityjs.org"
							 target="_blank">Velocity</a></li>
					</ul>
				</section>
				<section>
					<h1>Set interval</h1>
					<p><small class="">seriously?</small></p>
					<p>It's not accurate and the animations can drop frames</p>
				</section>
				<section>
					<h1>jQuery Animate</h1>
					<p>Ok, jQuery? If this is not enough, it has a lot of performance issues</p>
				</section>
				<section>
					<h1 style="font-size: 2.5em">Request Animation Frame</h1>
					<small>It's ok but is... a lot imperative and you have to modify DOM elements</small>
					<pre><code class="js">var start = null;
var element = document.getElementById('SomeElementYouWantToAnimate');
element.style.position = 'absolute';

function step(timestamp) {
  if (!start) start = timestamp;
  var progress = timestamp - start;
  element.style.left = Math.max(progress / 10, 200) + 'px';
  if (progress < 2000) {
    window.requestAnimationFrame(step);
  }
}

window.requestAnimationFrame(step);</code></pre>
				</section>
				<section>
					<h1>CSS</h1>
					<p>Super ok for most of use cases: but <br />
						they can't be composed on the same element<br />
						it's difficult to parallel launch them
						<br>
						It's impossible to animate values that change dinamically
						(Like a vertical accordion on text, try it!)
					</p>
				</section>
				<section>
					<h1>Libraries</h1>
					<small>Yeah another dependency</small> <br>
					They are ok if you are in an heavly animated project BUT:<br>
					<ul>
						<li>You're probably shooting a fly with an heavy cannon</li>
						<li>Unlinke GSAP says, they are not standards</li>
						<li>Maybe you can avoid the external dependency</li>
					</ul>
				</section>
			</section>
			<section>
				<section>
					<h1>So?</h1>
					<h2 class="fragment" style="font-weight: 100;">Let's see the code</h2>
				</section>
				<section>
					<pre><code class="js">  var player = document.getElementById('toAnimate').animate([
    { transform: 'scale(1)', opacity: 1, offset: 0 },
    { transform: 'scale(.5)', opacity: .5, offset: .3 },
    { transform: 'scale(.6)', opacity: .6, offset: 1 }
  ], {
    duration: 700, //milliseconds
    easing: 'ease-in-out', //'linear', a bezier curve, etc.
    delay: 10, //milliseconds
    iterations: Infinity, //or a number
    direction: 'alternate', //'normal', 'reverse', etc.
    fill: 'forwards' //'backwards', 'both', 'none', 'auto'
  });</code></pre>
				</section>
				<section>
					Or in CSS:
				</section>
				<section>
					<pre><code class="css">@keyframes emphasis {
  0% {
    transform: scale(1); 
    opacity: 1;}
  30% {
    transform: scale(.5); 
    opacity: .5;}
  100% {
    transform: scale(.6);
    opacity: .6;}
}
#toAnimate {
  animation: emphasis 700ms ease-in-out 10ms infinite alternate forwards;
}</code></pre>
				</section>
				<section>
					<pre><code class="js">  var player = document.getElementById('toAnimate').animate([
    { transform: 'scale(1)', opacity: 1, offset: 0 },
    { transform: 'scale(.5)', opacity: .5, offset: .3 },
    { transform: 'scale(.6)', opacity: .6, offset: 1 }
  ], {
    duration: 700, //milliseconds
    easing: 'ease-in-out', //'linear', a bezier curve, etc.
    delay: 10, //milliseconds
    iterations: Infinity, //or a number
    direction: 'alternate', //'normal', 'reverse', etc.
    fill: 'forwards' //'backwards', 'both', 'none', 'auto'
  });</code></pre>
				</section>
				<section>
					<div id="cat1" style="text-align:center"><img src="./images/cat.png" alt="" class="plain"></div>
					<script type="text/javascript">
						var cat1 = document.getElementById('cat1').animate([{
								transform: 'scale(1)',
								opacity: 1,
								offset: 0
							},
							{
								transform: 'scale(.5)',
								opacity: .5,
								offset: .3
							},
							{
								transform: 'scale(.6)',
								opacity: .6,
								offset: 1
							}
						], {
							duration: 700, //milliseconds
							easing: 'ease-in-out', //'linear', a bezier curve, etc.
							delay: 10, //milliseconds
							iterations: Infinity, //or a number
							direction: 'alternate', //'normal', 'reverse', etc.
							fill: 'forwards' //'backwards', 'both', 'none', 'auto'
						});
					</script>
				</section>
			</section>
			<section>
				<section>
					<h6>Let's see in depth</h6>
					<pre><code class="js">var animation = element.animate(keyframes, options); </code></pre>
				</section>
				<section>
					<h6><code class="js">keyframes</code></h6>
					<p>
						It's an object that contains all the animatable properties.
						It can be expresse in two ways:</p>
					<pre><code class="js">element.animate({
  opacity: [ 0, 1 ],          // [ from, to ]
  color:   [ "#fff", "#000" ] // [ from, to ]
}, 2000);</code></pre> or:
					<pre><code class="js">element.animate([ 
  { // from
    opacity: 0,
    color: "#fff"
  }, 
  { // to
    opacity: 1,
 â€‹   color: "#000"
  }
], 2000);</code></pre>
				</section>
				<section>
					<h6><code class="js">options</code></h6>
					<p>
						An <strong>integer</strong> rapresenting the duration in milliseconds
						or an <strong>object that contains the following properties</strong>
					</p>
					<ul>
						<li><code class="js">id</code></li>
						<li><code class="js">delay</code></li>
						<li><code class="js">direction</code></li>
						<li><code class="js">duration</code></li>
						<li><code class="js">easing</code></li>
						<li><code class="js">endDelay</code></li>
						<li><code class="js">fill</code></li>
						<li><code class="js">iterationStart</code></li>
						<li><code class="js">iterations</code></li>
					</ul>
				</section>
				<section>
					<h2>Yes, basically they are the CSS <code>animation-</code> properties exposed on JS</h2>
				</section>
			</section>
			<section>
				<section>
					<h3>And until now it's basically a sort of CSS in JS :troll:</h3>
				</section>
				<section>
					<h2>Chrome console:</h2>
					<img src="./images/chrome-console.png" alt="">
				</section>
				<section>
					YES! <code>animate()</code> returns an Animation type object
					with methods and properties, and now the fun begins!
				</section>
				<section>
					<h3>Methods</h3>
					<ul>
						<li><code>cancel()</code> the animation go back to the initial state</li>
						<li><code>finish()</code> jumps to the end of the animation</li>
						<li><code>pause()</code> pause the animation</li>
						<li><code>play()</code> play the animation</li>
						<li><code>reverse()</code> the animation will be played in reverse</li>
					</ul>
				</section>
				<section>
					<h3>Properties</h3>
					<ul>
						<li><code>currentTime</code> shows/sets the execution time in ms</li>
						<li><code>id</code> returns the animation id</li>
						<li><code>oncancel</code> runs a callback when the animation is cancelled by the <code>cancel()</code> method</li>
						<li><code>onfinish</code> runs a callback when the animation is finished</li>
						<li><code>playbackRate</code> can be a negative number</li>
						<li><code>playState</code> shows/sets the animation state</li>
						<li><code>startTime</code></li>
					</ul>
				</section>
				<section>
					<h3>Promise</h3>
					<ul>
						<li><code>finished</code></li>
						<li><code>ready</code></li>
					</ul>
				</section>
				<section>
					<h3>Promise</h3>
					<pre><code class="js">//set up 1 second animation to fade box out
var box = document.getElementById('box');
var animation = box.animate([{ opacity: 1 }, { opacity: 0 }], 1000);

function finishedHandler() { 
  console.log('animation finished: ' + Date.now());
}
function canceledHandler() { 
  console.log('animation canceled: ' + Date.now());
}

//the Promise version, log the timestamp when the Animation finishes
animation.finished.then(finishedHandler, canceledHandler);

//the effective successful equivalent with the onfinish callback
animation.onfinish = finishedHandler;</code></pre>
					<a href="http://danielcwilson.com/blog/2016/03/animations-and-promises/" class="cit">Dan Wilson</a>
				</section>
			</section>
			<section>
				<section>
					<h2>Bonus:</h2>
				</section>
				<section>
					<h3>An element can have multiple animations</h3>
					<pre><code class="js">var animated = document.getElementById('cat');
var purr = animated.animate({}, 1000);
var rotate = animated.animate({}, 2000);
var jump = animated.animate({}, 3500);</code></pre>
				</section>
				<section>
					<h3>
						All the animations can be returned by this function:</h3>
					<code>document.getAnimations()</code>
				</section>
			</section>
			<section>
				<section>
					<p>
						But... the moment that everyone was waiting for!
					</p>
					<p class="fragment">
						Amarcord moment
					</p>
				</section>
				<section>
					<img src="./images/flash.png" alt="">
				</section>
				<section>
					<h1>You can animate on a path!!1!1</h1>
				</section>
				<section>
					<div id="containerCat">
						<div id="cat2">
							<img src="./images/cat.png" alt="" class="plain"><br>
							ReactJSDay
						</div>
					</div>
					<script>
						var path =
							`path("M300.358,297.675c55.955,57.158 83.03,107.698 141.392,107.698c58.362,0 105.292,-46.93 105.292,-105.292c0,-58.361 -46.93,-105.893 -105.292,-105.292c-58.362,0.602 -80.022,43.321 -132.969,102.886c-53.549,52.947 -94.462,107.698 -152.824,107.698c-58.362,0 -105.292,-46.93 -105.292,-105.292c0,-58.361 46.93,-105.292 105.292,-105.292c58.362,0 98.072,55.956 144.401,102.886Z")`;
						var p = document.getElementById('cat2');
						var animation = p.animate({
							offsetPath: [path, path],
							offsetDistance: [0, "100%"]
						}, {
							duration: 4000,
							iterations: Infinity
						});
					</script>
				</section>
				<section>
					<pre><code class="js">
var path = `path("M300.358,297.675c55.955,57.158 83.03,107.698 141.392,107.698c58.362,0 105.292,-46.93 105.292,-105.292c0,-58.361 -46.93,-105.893 -105.292,-105.292c-58.362,0.602 -80.022,43.321 -132.969,102.886c-53.549,52.947 -94.462,107.698 -152.824,107.698c-58.362,0 -105.292,-46.93 -105.292,-105.292c0,-58.361 46.93,-105.292 105.292,-105.292c58.362,0 98.072,55.956 144.401,102.886Z")`;
var p = document.getElementById('cat2');
var animation = p.animate({
	offsetPath: [path, path ],
	offsetDistance: [0, "100%"]
}, {
	duration: 4000, 
	iterations: Infinity
});</code></pre>
				</section>
			</section>
			<section>
				<section>
					<h1>Can I use?</h1>
				</section>
				<section>
					<img src="./images/caniuse.png" alt="">
				</section>
				<section>
					<h2>There is a <a href="https://github.com/web-animations/web-animations-js" target="_blank">POLYFILL</a></h2>
					<small>
						and for your favourite library <a href="https://github.com/bringking/react-web-animation">react-web-animation</a>
					</small>
				</section>
			</section>
			<section>
				<section>
					<h1>
						So?
					</h1>
				</section>
				<section>
					<h3>Plz, we can use them, let's do it.</h3>
					Web is not a .sketch or .psd file,
					Animations can really improve the experience
				</section>
				<section>
					<img src="./images/animationUX.gif" alt="">
				</section>
			</section>
			<section style="text-align: center">
				<img src="./images/thanks.jpg" alt="">
			</section>
			<section>
				<h2>Bibliography</h2>
				<ul>
					<li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/animation" target="_blank">Mozilla Developers
							Network</a></li>
					<li><a href="https://www.chromestatus.com/features#animations" target="_blank">Chrome platform status</a></li>
					<li><a href="http://danielcwilson.com/blog/2015/07/animations-intro/" target="_blank">WAAPI Tutorial</a></li>
					<li><a href="https://pawelgrzybek.com/intro-to-the-web-animations-api/" target="_blank">Intro to WAAPI</a></li>
					<li><a href="https://webdesigner-webdeveloper.com/weblog/exploring-web-animations/" target="_blank">Exploring
							WAAPI</a></li>
					<li><a href="https://medium.com/ux-in-motion/creating-usability-with-motion-the-ux-in-motion-manifesto-a87a4584ddc"
						 target="_blank">Motion in UX</a></li>
				</ul>
			</section>
		</div>
	</div>

	<script src="lib/js/head.min.js"></script>
	<script src="js/reveal.js"></script>

	<script>
		// More info https://github.com/hakimel/reveal.js#configuration
		Reveal.initialize({
			history: true,

			// More info https://github.com/hakimel/reveal.js#dependencies
			dependencies: [{
					src: 'plugin/markdown/marked.js'
				},
				{
					src: 'plugin/markdown/markdown.js'
				},
				{
					src: 'plugin/notes/notes.js',
					async: true
				},
				{
					src: 'plugin/highlight/highlight.js',
					async: true,
					callback: function () {
						hljs.initHighlightingOnLoad();
					}
				}
			]
		});

		var confettiPlayers = [];
		//makeItSnow();

		function makeItRain() {
			var confetti = document.querySelectorAll('.snow');

			if (!confetti[0].animate) {
				return false;
			}

			for (var i = 0, len = confetti.length; i < len; ++i) {
				var snowball = confetti[i];
				snowball.innerHTML = '<div class="rotate"><div class="askew"></div></div>';
				var scale = Math.random() * .8 + .2;
				var player = snowball.animate([{
						transform: 'translate3d(' + (i / len * 100) + 'vw,0,0) scale(' + scale + ')',
						opacity: scale
					},
					{
						transform: 'translate3d(' + (i / len * 100 + 10) + 'vw,100vh,0) scale(' + scale + ')',
						opacity: 1
					}
				], {
					duration: Math.random() * 3000 + 3000,
					iterations: Infinity,
					delay: -(Math.random() * 5000)
				});


				confettiPlayers.push(player);
			}
		}
		makeItRain();
	</script>
</body>

</html>